<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="TributeDAO Framework" href="/opensearch.xml"><title data-react-helmet="true">Registry | TributeDAO Framework</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://tributedao.com/docs/contracts/core/dao-registry"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Registry | TributeDAO Framework"><meta data-react-helmet="true" name="description" content="The DAO Registry contract is the identity of the DAO. This is the contract address that every adapter usually interacts with."><meta data-react-helmet="true" property="og:description" content="The DAO Registry contract is the identity of the DAO. This is the contract address that every adapter usually interacts with."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://tributedao.com/docs/contracts/core/dao-registry"><link data-react-helmet="true" rel="alternate" href="https://tributedao.com/docs/contracts/core/dao-registry" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tributedao.com/docs/contracts/core/dao-registry" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://JM91LTL6DB-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.82f88be2.css">
<link rel="preload" href="/assets/js/runtime~main.5c083811.js" as="script">
<link rel="preload" href="/assets/js/main.f4a6d577.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="TributeDAO Framework Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="TributeDAO Framework Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">TRIBUTE</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/overview-and-benefits">Get Started</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/core/introduction">Core</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/extensions/introduction">Extensions</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/design/adapters/introduction">Adapters</a><a class="navbar__item navbar__link" href="/docs/thanks">Thank You</a><a href="https://discord.gg/tEfP68xnTd" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Tribute Discord"></a><a href="https://github.com/search?q=org%3Aopenlawteam+tribute-ui+OR+tribute-contracts+in%3Aname&amp;type=repositories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Tribute GitHub"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Introduction</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/overview-and-benefits">Overview &amp; Benefits</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Comparison</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Design Principles</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Core</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/contracts/core/dao-registry">Registry</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contracts/core/dao-factory">Factory</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Extension</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Adapter</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/tutorial/dao/interacting">Tribute UI</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Subgraph</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Registry</h1></header><p>The DAO Registry contract is the identity of the DAO. This is the contract address that every adapter usually interacts with.</p><p>The scope of the registry is to manage the following:</p><ul><li>The adapter registry - which adapter is being used by this DAO and which access it has to the DAO state.</li><li>The extension registry - which extension is part of the DAO and the adapter&#x27;s access to it.</li><li>Members registry - whether members exist, their delegate key and their access flags.</li></ul><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Each non-constant function in the DAO Registry has an access control modifier <code>hasAccess</code> linked to it, to make sure the caller has the right to call it.</p></div></div><p>The DaoRegistry.sol contract tracks the state of the DAO for 1) Adapter and Extension access, 2) State of Proposals, 3) Membership status. If an Adapter needs to access the DAO Registry, it must be registered to the DAO with the correct access flags.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="dao-state"></a>DAO State<a class="hash-link" href="#dao-state" title="Direct link to heading">#</a></h2><p>The DAO can be in one of the following states:</p><ul><li><code>CREATION</code>: when the DAO is being deployed via <code>initializeDao</code>, but is not ready to be used.</li><li><code>READY</code>: when the function <code>finalizeDao</code> has been called, and is now ready to be used.</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Once the DaoState is changed to <code>READY</code>, then the only way to add additional Adapters is via proposal process using the <strong><a href="/docs/contracts/adapters/configuration/managing-adapter">Managing Adapter</a></strong>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="access-flags"></a>Access Flags<a class="hash-link" href="#access-flags" title="Direct link to heading">#</a></h2><p>The are three main categories of Access Flags for the DAO Registry Contract:</p><ol><li><p>MemberFlags</p><ul><li><code>EXISTS</code>: right to check if a given address is already part of the DAO. Useful to restrict the DAO features that need to be access by members only.</li></ul></li><li><p>ProposalFlag</p><ul><li><code>EXISTS</code>: right to check if a given proposal id already exists in the DAO storage.</li><li><code>SPONSORED</code>: right to check if a given proposal id was already sponsored.</li><li><code>PROCESSED</code>: right to check if a griven proposal id was already processed.</li></ul></li><li><p>AclFlag</p><ul><li><code>REPLACE_ADAPTER</code>: right to add/remove/replace an adapter, function <code>dao.replaceAdapter</code>.</li><li><code>SUBMIT_PROPOSAL</code>: right to submit a proposal, function <code>dao.submitProposal</code>.</li><li><code>UPDATE_DELEGATE_KEY</code>: right to update the delegate key of a member, function <code>dao.updateDelegatedKey</code>.</li><li><code>SET_CONFIGURATION</code>: right to set custom configurations parameters, function <code>dao.setConfiguration</code>.</li><li><code>ADD_EXTENSION</code>: right to add an extension, function <code>dao.addExtension</code>.</li><li><code>REMOVE_EXTENSION</code>: right to remove an extension, function <code>dao.removeExtension</code>.</li><li><code>NEW_MEMBER</code>: right to add a new potential member to the DAO, function <code>dao.potentialNewMember</code>.</li></ul></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="structs"></a>Structs<a class="hash-link" href="#structs" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="proposal"></a>Proposal<a class="hash-link" href="#proposal" title="Direct link to heading">#</a></h3><p>The structure to track all the proposals in the DAO and their state (EXISTS, SPONSORED, PROCESSED).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="member"></a>Member<a class="hash-link" href="#member" title="Direct link to heading">#</a></h3><p>The structure to track all the members in the DAO and their state (EXISTS).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="checkpoint"></a>Checkpoint<a class="hash-link" href="#checkpoint" title="Direct link to heading">#</a></h3><p>Tribute makes use of the off-chain voting mechanism Snapshot. The <code>Checkpoint</code> struct assists with verifying the optimistic voting and proposal mechanisms at various blocktimes. See, <a href="https://github.com/snapshot-labs" target="_blank" rel="noopener noreferrer">https://github.com/snapshot-labs</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="adapterentry"></a>AdapterEntry<a class="hash-link" href="#adapterentry" title="Direct link to heading">#</a></h3><p>When an Adapter is added to <code>DaoRegistry</code> via the function <code>replaceAdapter</code>, a bytes32 <code>id</code> and a uint256 <code>acl</code> are parameters assigned to the Adapter for use in identifying the Adapter.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="extensionentry"></a>ExtensionEntry<a class="hash-link" href="#extensionentry" title="Direct link to heading">#</a></h3><p>When an Extension is added to <code>DaoRegistry</code> via <code>addExtenstion</code> a bytes32 <code>id</code> and a uint256 <code>acl</code> are parameters assigned to the Extension for use in identifying the Extension.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="storage"></a>Storage<a class="hash-link" href="#storage" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-members"></a>public members<a class="hash-link" href="#public-members" title="Direct link to heading">#</a></h3><p>Mapping of all the members. Member struct contains the flags uint.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="private-_members"></a>private _members<a class="hash-link" href="#private-_members" title="Direct link to heading">#</a></h3><p>List of all the member addresses. Useful to iterate through members.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-memberaddressesbydelegatedkey"></a>public memberAddressesByDelegatedKey<a class="hash-link" href="#public-memberaddressesbydelegatedkey" title="Direct link to heading">#</a></h3><p>Mapping of the member address by delegate key (think inverted mapping from members by delegate key).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="checkpoints"></a>checkpoints<a class="hash-link" href="#checkpoints" title="Direct link to heading">#</a></h3><p>Delegate key checkpoints. This is useful to know what the delegate key is at a certain point in time. A checkpoint is a data structure that allows storing data on a per-block basis and is originally inspired by the Compound contracts.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="numcheckpoints"></a>numCheckpoints<a class="hash-link" href="#numcheckpoints" title="Direct link to heading">#</a></h3><p>Checkpoint lengths per member address.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-state"></a>public state<a class="hash-link" href="#public-state" title="Direct link to heading">#</a></h3><p>Dao state. This is used to know if the DAO is currently being set up or if it is already running. Useful to configure it.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-proposals"></a>public proposals<a class="hash-link" href="#public-proposals" title="Direct link to heading">#</a></h3><p>Mapping of all the proposals for the DAO. Each proposal has an adapterAddress (which adapter created it) and flags to define its state.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-adapters"></a>public adapters<a class="hash-link" href="#public-adapters" title="Direct link to heading">#</a></h3><p>Mapping of all the adapters. bytes32 is the keccak256 of their name and address.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-inverseadapters"></a>public inverseAdapters<a class="hash-link" href="#public-inverseadapters" title="Direct link to heading">#</a></h3><p>Mapping of adapter details. For each address, we can get its id (keccak256(name)) and its acl (access control, which function in the DAO it has access to).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-extensions"></a>public extensions<a class="hash-link" href="#public-extensions" title="Direct link to heading">#</a></h3><p>Mapping of each extension. Like for adapters, the key here is keccak256(name) (e.g., keccak256(&quot;bank&quot;))</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-inverseextensions"></a>public inverseExtensions<a class="hash-link" href="#public-inverseextensions" title="Direct link to heading">#</a></h3><p>Mapping of extension details. For each extension address, you get its id (keccak256(name)) and a mapping from adapter address =&gt; access control.
Access control for each extension is centralized in the DaoRegistry to avoid each extension implementing its own ACL system.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-mainconfiguration"></a>public mainConfiguration<a class="hash-link" href="#public-mainconfiguration" title="Direct link to heading">#</a></h3><p>Generic configuration mapping from key (keccak256(name)) to any type that can be encoded in 256 bytes (does not need to be uint, could be bytes32 too).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="public-addressconfiguration"></a>public addressConfiguration<a class="hash-link" href="#public-addressconfiguration" title="Direct link to heading">#</a></h3><p>Since addresses are not encoded in 256 bytes, we need a separate configuration mapping for this type.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>The constructor function is non-existent, because this is a Cloneable contract. See, <a href="https://eips.ethereum.org/EIPS/eip-1167" target="_blank" rel="noopener noreferrer">https://eips.ethereum.org/EIPS/eip-1167</a></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="initialize"></a>initialize<a class="hash-link" href="#initialize" title="Direct link to heading">#</a></h3><p>Initializes the DAO by creating the initial members who are 1) the DAO creator passed to the function, 2) the account passed to the function which paid for the transaction to create the DAO, and 3) the DaoFactory calling this function.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="finalizedao"></a>finalizeDao<a class="hash-link" href="#finalizedao" title="Direct link to heading">#</a></h3><p>Mark the DAO as finalized. After that, changes can only be made through adapters.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="setconfiguration"></a>setConfiguration<a class="hash-link" href="#setconfiguration" title="Direct link to heading">#</a></h3><p>Set a generic configuration entry for the DAO.
Only adapters with access to this function can do it.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="setaddressconfiguration"></a>setAddressConfiguration<a class="hash-link" href="#setaddressconfiguration" title="Direct link to heading">#</a></h3><p>Set an address configuration entry for the DAO.
Only adapters with access to this function can do it.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="potentialnewmember"></a>potentialNewMember<a class="hash-link" href="#potentialnewmember" title="Direct link to heading">#</a></h3><p>This functions checks if the member exists in the DAO. If the member does not exist,
it creates the entry for the new member.
That means creating an entry in the members mapping, setting the delegate key to be the same address as the new member and adding the address to the members list.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getconfiguration"></a>getConfiguration<a class="hash-link" href="#getconfiguration" title="Direct link to heading">#</a></h3><p>Get the generic config entry by passing the keccak256(config name).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getaddressconfiguration"></a>getAddressConfiguration<a class="hash-link" href="#getaddressconfiguration" title="Direct link to heading">#</a></h3><p>Get the address config entry by passing the keccak256(config name).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="addextension"></a>addExtension<a class="hash-link" href="#addextension" title="Direct link to heading">#</a></h3><p>Add a new extension to the registry. It first checks if the extension id is already used and reverts if it is the case.
It then adds the extension to the DAO and initializes it.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="removeextension"></a>removeExtension<a class="hash-link" href="#removeextension" title="Direct link to heading">#</a></h3><p>Removes the extension by extension id. It reverts if no extension has been registered for that id (keccak256(name)).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="setacltoextensionforadapter"></a>setAclToExtensionForAdapter<a class="hash-link" href="#setacltoextensionforadapter" title="Direct link to heading">#</a></h3><p>Sets the access control for a particular adapter (by address) to a specific extension.
Both adapter and extension need to be already registered to the DAO.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="replaceadapter"></a>replaceAdapter<a class="hash-link" href="#replaceadapter" title="Direct link to heading">#</a></h3><p>Adds, removes or replaces an adapter om the DAO registry. It also sets the access control.
The adapter can be added only if the adapter id is not already in use.
To remove an adapter from the DAO just set the address to 0x0.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="isextension"></a>isExtension<a class="hash-link" href="#isextension" title="Direct link to heading">#</a></h3><p>Checks whether the address is registered as an extension in the DAO.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="isadapter"></a>isAdapter<a class="hash-link" href="#isadapter" title="Direct link to heading">#</a></h3><p>Checks whether the address is registered as an adapter in the DAO.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="hasadapteraccess"></a>hasAdapterAccess<a class="hash-link" href="#hasadapteraccess" title="Direct link to heading">#</a></h3><p>Checks whether the adapter has access to a certain flag in the DAO.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="hasadapteraccesstoextension"></a>hasAdapterAccessToExtension<a class="hash-link" href="#hasadapteraccesstoextension" title="Direct link to heading">#</a></h3><p>Checks whether a certain adapter has access to a certain extension in the DAO.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getadapteraddress"></a>getAdapterAddress<a class="hash-link" href="#getadapteraddress" title="Direct link to heading">#</a></h3><p>Returns the adapter address registered for this adapterId and reverts if not found.</p><p>The reason we revert here is to avoid the need to check everywhere that the return value is 0x0 when we want to use an adapter.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getextensionaddress"></a>getExtensionAddress<a class="hash-link" href="#getextensionaddress" title="Direct link to heading">#</a></h3><p>Returns the extension address registered for this extensionId and reverts if not found.</p><p>The reason we revert here is to avoid the need to check everywhere that the return value is 0x0 when we want to use an extension.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="submitproposal"></a>submitProposal<a class="hash-link" href="#submitproposal" title="Direct link to heading">#</a></h3><p>Creates a proposal entry for the DAO.
It checks that the proposal was not previously created.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="sponsorproposal"></a>sponsorProposal<a class="hash-link" href="#sponsorproposal" title="Direct link to heading">#</a></h3><p>Marks an existing proposal as sponsored.
saves which voting adapter is being used for this proposal.
Checks that the proposal has not been sponsored yet.
Checks that the proposal exists.
Checks that the adapter that sponsors the proposal is the one that submitted it.
Checks that the proposal has not been processed yet.
Checks that the member sponsoring the proposal is an active member.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="processproposal"></a>processProposal<a class="hash-link" href="#processproposal" title="Direct link to heading">#</a></h3><p>Marks an existing proposal as processed.
Checks that the proposal has not been processed already and that it exists.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_setproposalflag"></a>_setProposalFlag<a class="hash-link" href="#_setproposalflag" title="Direct link to heading">#</a></h3><p>Internal utility function to set a flag to a proposal.
It checks that the proposal exists and that the flag has not been already set.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ismemberaddress-addr"></a>isMember(address addr)<a class="hash-link" href="#ismemberaddress-addr" title="Direct link to heading">#</a></h3><p>Returns true if the address is the delegate key of an existing member</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getproposalflag"></a>getProposalFlag<a class="hash-link" href="#getproposalflag" title="Direct link to heading">#</a></h3><p>Helper function to get the flag value for a proposal.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getmemberflag"></a>getMemberFlag<a class="hash-link" href="#getmemberflag" title="Direct link to heading">#</a></h3><p>Helper function to get the flag value for a member.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getnbmembers"></a>getNbMembers<a class="hash-link" href="#getnbmembers" title="Direct link to heading">#</a></h3><p>Returns how many members have been registered in the DAO.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getmemberaddress"></a>getMemberAddress<a class="hash-link" href="#getmemberaddress" title="Direct link to heading">#</a></h3><p>Gets an address at a certain index in the members list.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="updatedelegatekey"></a>updateDelegateKey<a class="hash-link" href="#updatedelegatekey" title="Direct link to heading">#</a></h3><p>Updates the delegate key of a certain member.
It checks that the delegate key is not being used by another member and is not the address of an existing member.
It also checks that the member exists.</p><p>If all the checks pass, the delegate key is updated and a delegate key checkpoint is created.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getaddressifdelegated"></a>getAddressIfDelegated<a class="hash-link" href="#getaddressifdelegated" title="Direct link to heading">#</a></h3><p>Returns the member address if the address is used as a delegate key or the address itself if it is not.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getcurrentdelegatekeyaddress-memberaddr"></a>getCurrentDelegateKey(address memberAddr)<a class="hash-link" href="#getcurrentdelegatekeyaddress-memberaddr" title="Direct link to heading">#</a></h3><p>Returns the current delegate key for a member address. The member&#x27;s delegate key is an alternative address to their original membership address that they have specified for interacting with the DAO. This delegation can be used for a number of different reasons (attack, reorg, technical issues, tax).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getpreviousdelegatekey"></a>getPreviousDelegateKey<a class="hash-link" href="#getpreviousdelegatekey" title="Direct link to heading">#</a></h3><p>Returns the previous delegate key for a member address. It is used to prepare the checkpoint.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="getpriordelegatekey"></a>getPriorDelegateKey<a class="hash-link" href="#getpriordelegatekey" title="Direct link to heading">#</a></h3><p>Returns the delegate key for a member at a certain block number.
If none are found, the memberAddr is returned instead.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="_createnewdelegatecheckpoint"></a>_createNewDelegateCheckpoint<a class="hash-link" href="#_createnewdelegatecheckpoint" title="Direct link to heading">#</a></h3><p>Writes a new checkpoint for a specific member.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="proposals"></a>Proposals<a class="hash-link" href="#proposals" title="Direct link to heading">#</a></h3><p>The proposal order follows Moloch v2</p><ol><li>A proposal is submitted</li></ol><ul><li><code>event SubmittedProposal(bytes32 proposalId, uint256 flags);</code></li></ul><ol start="2"><li>Then it sponsored by a member</li></ol><ul><li><code>event SponsoredProposal(bytes32 proposalId, uint256 flags, address votingAdapter);</code></li></ul><ol start="3"><li>After a proposal is voted on, it can finally be processed</li></ol><ul><li><code>event ProcessedProposal(bytes32 proposalId, uint256 flags);</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="adapters"></a>Adapters<a class="hash-link" href="#adapters" title="Direct link to heading">#</a></h3><ol><li>A new adapter is added (registereds) to the DAO</li></ol><ul><li><code>event AdapterAdded(bytes32 adapterId,address adapterAddress,uint256 flags);</code></li></ul><ol start="2"><li>An adapter is removed from the DAO</li></ol><ul><li><code>event AdapterRemoved(bytes32 adapterId);</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="members"></a>Members<a class="hash-link" href="#members" title="Direct link to heading">#</a></h3><ol><li>When a member updates the delegated key</li></ol><ul><li><code>event UpdateDelegateKey(address memberAddress, address newDelegateKey);</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">#</a></h3><ol><li>When a new configuration is added/erased</li></ol><ul><li><code>event ConfigurationUpdated(bytes32 key, uint256 value);</code></li></ul><ol start="2"><li>When the Address configuration is updated</li></ol><ul><li><code>event AddressConfigurationUpdated(bytes32 key, address value);</code></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openlawteam/tribute-contracts/edit/docs/website/docs/contracts/core/DaoRegistry.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorial/extensions/creating-an-extension"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« How to create an Extension</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/contracts/core/dao-factory"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Factory »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dao-state" class="table-of-contents__link">DAO State</a></li><li><a href="#access-flags" class="table-of-contents__link">Access Flags</a></li><li><a href="#structs" class="table-of-contents__link">Structs</a><ul><li><a href="#proposal" class="table-of-contents__link">Proposal</a></li><li><a href="#member" class="table-of-contents__link">Member</a></li><li><a href="#checkpoint" class="table-of-contents__link">Checkpoint</a></li><li><a href="#adapterentry" class="table-of-contents__link">AdapterEntry</a></li><li><a href="#extensionentry" class="table-of-contents__link">ExtensionEntry</a></li></ul></li><li><a href="#storage" class="table-of-contents__link">Storage</a><ul><li><a href="#public-members" class="table-of-contents__link">public members</a></li><li><a href="#private-_members" class="table-of-contents__link">private _members</a></li><li><a href="#public-memberaddressesbydelegatedkey" class="table-of-contents__link">public memberAddressesByDelegatedKey</a></li><li><a href="#checkpoints" class="table-of-contents__link">checkpoints</a></li><li><a href="#numcheckpoints" class="table-of-contents__link">numCheckpoints</a></li><li><a href="#public-state" class="table-of-contents__link">public state</a></li><li><a href="#public-proposals" class="table-of-contents__link">public proposals</a></li><li><a href="#public-adapters" class="table-of-contents__link">public adapters</a></li><li><a href="#public-inverseadapters" class="table-of-contents__link">public inverseAdapters</a></li><li><a href="#public-extensions" class="table-of-contents__link">public extensions</a></li><li><a href="#public-inverseextensions" class="table-of-contents__link">public inverseExtensions</a></li><li><a href="#public-mainconfiguration" class="table-of-contents__link">public mainConfiguration</a></li><li><a href="#public-addressconfiguration" class="table-of-contents__link">public addressConfiguration</a></li></ul></li><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#initialize" class="table-of-contents__link">initialize</a></li><li><a href="#finalizedao" class="table-of-contents__link">finalizeDao</a></li><li><a href="#setconfiguration" class="table-of-contents__link">setConfiguration</a></li><li><a href="#setaddressconfiguration" class="table-of-contents__link">setAddressConfiguration</a></li><li><a href="#potentialnewmember" class="table-of-contents__link">potentialNewMember</a></li><li><a href="#getconfiguration" class="table-of-contents__link">getConfiguration</a></li><li><a href="#getaddressconfiguration" class="table-of-contents__link">getAddressConfiguration</a></li><li><a href="#addextension" class="table-of-contents__link">addExtension</a></li><li><a href="#removeextension" class="table-of-contents__link">removeExtension</a></li><li><a href="#setacltoextensionforadapter" class="table-of-contents__link">setAclToExtensionForAdapter</a></li><li><a href="#replaceadapter" class="table-of-contents__link">replaceAdapter</a></li><li><a href="#isextension" class="table-of-contents__link">isExtension</a></li><li><a href="#isadapter" class="table-of-contents__link">isAdapter</a></li><li><a href="#hasadapteraccess" class="table-of-contents__link">hasAdapterAccess</a></li><li><a href="#hasadapteraccesstoextension" class="table-of-contents__link">hasAdapterAccessToExtension</a></li><li><a href="#getadapteraddress" class="table-of-contents__link">getAdapterAddress</a></li><li><a href="#getextensionaddress" class="table-of-contents__link">getExtensionAddress</a></li><li><a href="#submitproposal" class="table-of-contents__link">submitProposal</a></li><li><a href="#sponsorproposal" class="table-of-contents__link">sponsorProposal</a></li><li><a href="#processproposal" class="table-of-contents__link">processProposal</a></li><li><a href="#_setproposalflag" class="table-of-contents__link">_setProposalFlag</a></li><li><a href="#ismemberaddress-addr" class="table-of-contents__link">isMember(address addr)</a></li><li><a href="#getproposalflag" class="table-of-contents__link">getProposalFlag</a></li><li><a href="#getmemberflag" class="table-of-contents__link">getMemberFlag</a></li><li><a href="#getnbmembers" class="table-of-contents__link">getNbMembers</a></li><li><a href="#getmemberaddress" class="table-of-contents__link">getMemberAddress</a></li><li><a href="#updatedelegatekey" class="table-of-contents__link">updateDelegateKey</a></li><li><a href="#getaddressifdelegated" class="table-of-contents__link">getAddressIfDelegated</a></li><li><a href="#getcurrentdelegatekeyaddress-memberaddr" class="table-of-contents__link">getCurrentDelegateKey(address memberAddr)</a></li><li><a href="#getpreviousdelegatekey" class="table-of-contents__link">getPreviousDelegateKey</a></li><li><a href="#getpriordelegatekey" class="table-of-contents__link">getPriorDelegateKey</a></li><li><a href="#_createnewdelegatecheckpoint" class="table-of-contents__link">_createNewDelegateCheckpoint</a></li></ul></li><li><a href="#events" class="table-of-contents__link">Events</a><ul><li><a href="#proposals" class="table-of-contents__link">Proposals</a></li><li><a href="#adapters" class="table-of-contents__link">Adapters</a></li><li><a href="#members" class="table-of-contents__link">Members</a></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright"><p>&copy; TributeDAO Framework.</p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.5c083811.js"></script>
<script src="/assets/js/main.f4a6d577.js"></script>
</body>
</html>