---
id: nft-extension
title: ERC1155
---

An [IERC1155Receiver](https://docs.openzeppelin.com/contracts/3.x/erc1155) contract manages the collection NFTs that are the (ERC1155) standard.

The extension adds to the DAO the capability of managing and curating a collection of ERC1155 standard NFTs.

## Access Flags

- `COLLECT_NFT`: Allows the caller adapter to transfer the NFT to the GUILD collection.
- `WITHDRAW_NFT`: Allows the caller to remove the NFT from the GUILD collection and return it to a new owner.
- `INTERNAL_TRANSFER`: Allows the caller to update the internal ownership of the NFT within the GUILD collection.

## Storage

#### public initialized

Internally tracks deployment under eip-1167 proxy pattern.

#### public dao

Keeps track of each DAO instance the current contract belongs to.

#### private \_nfts

Tracks all the Token IDs that belong to an NFT address stored in the GUILD collection.

#### private \_nftTracker

Tracks the address of the Owner to the NFT address, the NFT's corresponding Token ID and the Amount of that particular Token Id held by Owner.

#### private \_ownership

Tracks the internal owner of record of an NFT that has been transferred to the extension.

#### private \_nftAddresses

Tracks all the NFTs addresses collected and stored in the GUILD collection.

## Functions

### collect

```solitidy
    /**
     * @notice Collects the NFT from the owner and moves it to the NFT extension.
     * @notice It must be have been allowed to move this token by either {approve} or {setApprovalForAll}.
     * @dev Reverts if the NFT is not in ERC1155 standard.
     * @param owner The actual owner of the NFT that will get collected.
     * @param nftAddr The NFT contract address.
     * @param nftTokenId The NFT token id.
     * @param amount The amount of NFT with nftTokenId to be collected.
     */

function collect(
    address owner,
    address nftAddr,
    uint256 nftTokenId,
    uint256 amount
) external
```

### withdrawNFT

````solidity

    /**
     * @notice Transfers the NFT token from the extension address to the new owner.
     * @notice It also updates the internal state to keep track of the all the NFTs collected by the extension.
     * @notice The caller must have the ACL Flag: WITHDRAW_NFT
     * @notice TODO This function needs to be called from a new adapter (RagequitNFT) that will manage the Bank balances, and will return the NFT to the owner.
     * @dev Reverts if the NFT is not in ERC1155 standard.
     * @param newOwner The address of the new owner that will receive the NFT.
     * @param nftAddr The NFT address that must be in ERC1155 standard.
     * @param nftTokenId The NFT token id.
     * @param amount The NFT token id amount to withdraw.
     */

     function withdrawNFT (
        address newOwner,
        address nftAddr,
        uint256 nftTokenId,
        uint256 amount
     ) external
     ```
     ``` solidity
        /**
     * @notice Updates internally the ownership of the NFT.
     * @notice The caller must have the ACL Flag: INTERNAL_TRANSFER
     * @dev Reverts if the NFT is not already internally owned in the extension.
     * @param fromOwner The address of the current owner.
     * @param toOwner The address of the new owner.
     * @param nftAddr The NFT address.
     * @param nftTokenId The NFT token id.
     * @param amount the number of a particular NFT token id.
     */

     function internalTransfer(
          address fromOwner,
        address toOwner,
        address nftAddr,
        uint256 nftTokenId,
        uint256 amount
     ) external
     ```
     ### getNFTId

```solidity
/**
  * @notice Gets ID generated from an NFT address and token id (used internally to map ownership).
  * @param nftAddress The NFT address.
  * @param tokenId The NFT token id.
  */
function getNFTId(address nftAddress, uint256 tokenId)
    public
    pure
    returns (bytes32)
````
